
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>欢迎使用seafile</title>
<script src="../static/jquery-3.2.1.min.js"></script>
</head>
<body>
    <div>
       <table>
            <tr>
                <th></th>
                <th>Library Name</th>
                <th>Size</th>
                <th>Last Update</th>
                <th>Group</th>
                <th>Permission</th>
                <th>Sync Status</th>
                <th></th>
                <th>Local Path</th>
            </tr>
            {% for group, repos in repo_group_list.items %}
              <tr>
                  <td>
                      <p> #{{ group }}</p>
                  </td>
              </tr>
              {% for repo in repos %}
            <tr>
                <td>
                    {% if repo.encrypted == 1 %}
                    <img src="../static/img/sync-folder-encrypt-20.png">
                    {% else %}
                    <img src="../static/img/sync-folder-20.png">
                    {% endif %}
                </td>
                <td>
                    <a href="/repo/file_list?repo_id={{ repo.id }}">{{ repo.name }}</a>
                </td>
                <td> {{ repo.size }}</td>
                <td> {{ repo.time }}</td>
                <td> {{ repo.group_name }}</td>
                <td> {{ repo.permission }}</td>

                {% if repo.sync_status == 'unsync' %}
                <td> {{ repo.sync_status }}</td>
                <td>
                    <input type="button" value="sync" data-repoid="{{ repo.id }}"  data-reponame="{{ repo.name }}" onclick="sync(this)" />
                    <input type="button" value="pull" data-repoid="{{ repo.id }}" onclick="download(this)">
                </td>
                {% elif repo.sync_status == 'synchronized' %}
                <td>{{ repo.sync_status }}</td>
                <td> <input type="button" value="desync" data-repoid="{{ repo.id }}" data-syncpath="{{ repo.sync_path }}" onclick="desync(this)" /></td>
                {% else %}
                <td>{{ repo.sync_status }}</td>
                <td> <input type="button" value="cancel-sync" data-repoid="{{ repo.id }}" data-syncpath="{{ repo.sync_path }}" onclick="cancel(this)" /></td>
                <td style="width:auto">
                    <div class="easyui-progressbar" data-options="value:0" style="width:100px;float:left" data-progressname="{{ repo.id }}"></div>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span>download: 0.0 KB/s</span>
                    <script type="text/javascript" async="async">
                            progress('{{ repo.id }}');
                    </script>
                </td>
                {% endif %}


                {% if repo.sync_path %}
                <td>
                    <a href="file://{{ repo.sync_path }}">{{ repo.sync_path }}</a>
                </td>
                {% endif%}
            </tr>
              {% endfor %}
            {% endfor %}
            </table>
    </div>


<div class="table-responsive">
        <table class="table">
            <caption>群组共享</caption>
            <thead>
                <tr>
                     <th>Library Name</th>
                    <th>Size</th>
                    <th>Last Update</th>
                    <th>From</th>
                    <th>Permission</th>
                    <th>Sync Status</th>
                    <th>Option</th>
                    <th>Local Path</th>
                </tr>
            </thead>
            <tbody>
                {% for group, repos in repo_group_list.items %}
              <tr>
                  <td>
                      <p> #{{ group }}</p>
                  </td>
              </tr>
              {% for repo in repos %}
            <tr>
                <td>
                    {% if repo.encrypted == 1 %}
                    <img src="../static/img/sync-folder-encrypt-20.png">
                    {% else %}
                    <img src="../static/img/sync-folder-20.png">
                    {% endif %}
                </td>
                <td>
                    <a href="/repo/file_list?repo_id={{ repo.id }}">{{ repo.name }}</a>
                </td>
                <td> {{ repo.size }}</td>
                <td> {{ repo.time }}</td>
                <td> {{ repo.group_name }}</td>
                <td> {{ repo.permission }}</td>

                {% if repo.sync_status == 'unsync' %}
                <td> {{ repo.sync_status }}</td>
                <td>
                    <input class="optionBtn" type="button" value="sync" data-repoid="{{ repo.id }}"  data-reponame="{{ repo.name }}" onclick="sync(this)" />
                    <input class="optionBtn" type="button" value="pull" data-repoid="{{ repo.id }}" onclick="download(this)">
                </td>
                {% elif repo.sync_status == 'synchronized' %}
                <td>{{ repo.sync_status }}</td>
                <td> <input class="optionBtn" type="button" value="desync" data-repoid="{{ repo.id }}" data-syncpath="{{ repo.sync_path }}" onclick="desync(this)" /></td>
                {% else %}
                <td>{{ repo.sync_status }}</td>
                <td> <input class="optionBtn" type="button" value="cancel-sync" data-repoid="{{ repo.id }}" data-syncpath="{{ repo.sync_path }}" onclick="cancel(this)" /></td>
                <td style="width:auto">
                    <div class="easyui-progressbar" data-options="value:0" style="width:100px;float:left" data-progressname="{{ repo.id }}"></div>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <span>download: 0.0 KB/s</span>
                    <script type="text/javascript" async="async">
                            progress('{{ repo.id }}');
                    </script>
                </td>
                {% endif %}


                {% if repo.sync_path %}
                <td>
                    <a href="file://{{ repo.sync_path }}">{{ repo.sync_path }}</a>
                </td>
                    {% else %}
                    <td>
                        <a href="#">none</a>
                    </td>
                {% endif%}
            </tr>
              {% endfor %}
            {% endfor %}
            </tbody>
        </table>
    </div>

</body>

</html>
